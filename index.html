<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MoreHost - Ultra Legend Pro UI</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/dracula.min.css">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body,html{width:100%;height:100%;font-family:Arial, sans-serif;overflow:hidden;background:black;color:white}

    /* üåå Moving Stars Background */
    .stars{position:fixed;width:100%;height:100%;z-index:-1;
      background:black url('https://www.script-tutorials.com/demos/360/images/stars.png') repeat;
      animation:moveStars 200s linear infinite}
    @keyframes moveStars{from{background-position:0 0}to{background-position:-10000px 5000px}}

    /* üöÄ Loading Screen */
    #loading{position:fixed;top:0;left:0;right:0;bottom:0;
      background:black;display:flex;flex-direction:column;
      align-items:center;justify-content:center;z-index:1000}
    #loading img{width:120px;animation:spin 3s linear infinite}
    @keyframes spin{100%{transform:rotate(360deg)}}
    #loading h2{margin-top:20px;font-size:28px;animation:floatText 2s ease-in-out infinite alternate}
    @keyframes floatText{from{transform:translateY(0)}to{transform:translateY(-10px)}}

    /* üñ•Ô∏è Dashboard */
    #dashboard{display:none;height:100%;padding:32px;overflow:auto}
    .project-card{width:220px;height:120px;background:rgba(255,255,255,0.05);
      border-radius:12px;display:flex;align-items:center;justify-content:center;
      font-size:18px;color:#00d4ff;cursor:pointer;position:relative;overflow:hidden}
    .project-card::after{content:"";position:absolute;top:0;left:-100%;
      width:200%;height:100%;background:linear-gradient(120deg,transparent,rgba(255,255,255,0.4),transparent);
      animation:shine 3s infinite}
    @keyframes shine{100%{left:100%}}

    /* üñ•Ô∏è Workspace */
    #workspace{display:none;height:100%;display:flex;flex-direction:row}
    .sidebar{width:220px;background:#111;padding:15px;overflow-y:auto}
    .sidebar h3{margin-bottom:10px;color:#00d4ff}
    .sidebar ul{list-style:none}
    .sidebar li{padding:6px 8px;cursor:pointer;border-radius:5px}
    .sidebar li:hover{background:#222}
    .editor-area{flex:1;display:flex;flex-direction:column}
    .topbar{background:#111;padding:8px;display:flex;justify-content:flex-end}
    .topbar button{margin-left:8px;padding:6px 12px;border:none;
      background:linear-gradient(90deg,#00d4ff,#0066ff);
      color:white;border-radius:6px;cursor:pointer}
    .CodeMirror{flex:1;height:100%!important;font-size:14px}

    /* üîç Preview Overlay */
    #preview{position:fixed;top:0;left:0;right:0;bottom:0;
      background:white;display:none;z-index:999}
    #preview iframe{width:100%;height:100%;border:none}
    #preview button{position:absolute;top:10px;right:10px;padding:6px 12px;
      background:red;color:white;border:none;border-radius:5px;cursor:pointer}
  </style>
</head>
<body>
  <div class="stars"></div>

  <!-- üöÄ Loading -->
  <div id="loading">
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg" alt="logo">
    <h2>Loading MoreHost...</h2>
  </div>

  <!-- üñ•Ô∏è Dashboard -->
  <div id="dashboard">
    <div class="project-card" onclick="newProject()">+ New Project</div>
    <div id="projectList"></div>
  </div>

  <!-- üñ•Ô∏è Workspace -->
  <div id="workspace">
    <div class="sidebar">
      <h3>Files</h3>
      <button onclick="addFile()">+ Add File</button>
      <ul id="fileList"></ul>
    </div>
    <div class="editor-area">
      <div class="topbar">
        <button onclick="saveProject()">Save</button>
        <button onclick="openPreview()">Preview</button>
      </div>
      <textarea id="codeEditor"></textarea>
    </div>
  </div>

  <!-- üîç Preview -->
  <div id="preview">
    <button onclick="closePreview()">Close</button>
    <iframe id="previewFrame"></iframe>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/xml/xml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/htmlmixed/htmlmixed.min.js"></script>

  <script>
    /* ===== State ===== */
    let projects = JSON.parse(localStorage.getItem("ultraProjects")||"{}");
    let currentProject=null,currentFile=null,editor=null;
    const $=id=>document.getElementById(id);

    /* üöÄ Loading ‚Üí Dashboard (2 sec) */
    window.addEventListener("load",()=>{
      setTimeout(()=>{
        const loadingEl = $("loading");
        const dashEl = $("dashboard");
        if(loadingEl) loadingEl.style.display="none";
        if(dashEl) dashEl.style.display="block";
        renderProjects();
      },2000);
    });

    function saveProjects(){
      localStorage.setItem("ultraProjects",JSON.stringify(projects));
    }

    function renderProjects(){
      const list=$("projectList"); list.innerHTML="";
      Object.keys(projects).forEach(name=>{
        const card=document.createElement("div");
        card.className="project-card"; card.textContent=name;
        card.onclick=()=>openProject(name);
        list.appendChild(card);
      });
    }

    function newProject(){
      const name=prompt("Enter project name (no spaces):");
      if(!name||name.includes(" ")) return alert("Invalid name");
      projects[name]={"main.js":"// Start Your Coding from here"};
      saveProjects(); openProject(name);
    }

    function openProject(name){
      currentProject=name;
      $("dashboard").style.display="none";
      $("workspace").style.display="flex";
      renderFiles();
    }

    function renderFiles(){
      const list=$("fileList"); list.innerHTML="";
      Object.keys(projects[currentProject]).forEach(fname=>{
        const li=document.createElement("li");
        li.textContent=fname;
        li.onclick=()=>openFile(fname);
        list.appendChild(li);
      });
    }

    function addFile(){
      if(!currentProject) return;
      const fname=prompt("Enter file name (ex: script.js):");
      if(!fname) return;
      projects[currentProject][fname]="";
      saveProjects(); renderFiles(); openFile(fname);
    }

    function openFile(fname){
      currentFile=fname;
      const val=projects[currentProject][fname]||"";
      if(!editor){
        editor=CodeMirror.fromTextArea($("codeEditor"),{
          lineNumbers:true,mode:"javascript",theme:"dracula"
        });
      }
      editor.setValue(val||"// Start Your Coding from here");
      editor.on("change",()=>{
        projects[currentProject][currentFile]=editor.getValue();
      });
    }

    function saveProject(){
      if(!currentProject||!currentFile) return;
      projects[currentProject][currentFile]=editor.getValue();
      saveProjects(); alert("Project saved!");
    }

    function openPreview(){
      if(!currentProject||!currentFile) return;
      let code=projects[currentProject][currentFile];
      if(!code.includes("<html")){
        code=`<html><body style="background:white;color:black;">${code}</body></html>`;
      }
      $("previewFrame").srcdoc=code;
      $("preview").style.display="block";
    }
    function closePreview(){
      $("preview").style.display="none";
    }
  </script>
</body>
</html>
