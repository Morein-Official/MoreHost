<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MoreHost</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
  <style>
    body, html {
      height: 100%;
      margin: 0;
      font-family: 'Inter', sans-serif;
      color: white;
      background: radial-gradient(ellipse at bottom, #0a0a0f 0%, #000000 100%);
      overflow: hidden;
    }

    /* Moving stars */
    .stars, .stars:after {
      content: " ";
      position: absolute;
      top: 0;
      width: 2px;
      height: 2px;
      background: transparent;
      box-shadow: 
        100px 200px white, 500px 300px white, 800px 1200px white, 
        1500px 700px white, 2000px 900px white, 2500px 1100px white, 
        300px 1500px white, 1200px 1800px white;
      animation: animStars 60s linear infinite;
    }
    .stars:after { top: 2000px; }
    @keyframes animStars {
      from { transform: translateY(0px); }
      to { transform: translateY(-2000px); }
    }

    /* Loading letters floating individually */
    .loading-text {
      display: flex;
      gap: 5px;
      font-size: 3rem;
      font-weight: bold;
      color: #00e5ff;
      text-shadow: 0 0 10px #00e5ff, 0 0 20px #00e5ff, 0 0 40px #00e5ff;
    }
    .loading-text span {
      display: inline-block;
      animation: float 2s ease-in-out infinite;
    }
    .loading-text span:nth-child(1) { animation-delay: 0s; }
    .loading-text span:nth-child(2) { animation-delay: 0.2s; }
    .loading-text span:nth-child(3) { animation-delay: 0.4s; }
    .loading-text span:nth-child(4) { animation-delay: 0.6s; }
    .loading-text span:nth-child(5) { animation-delay: 0.8s; }
    .loading-text span:nth-child(6) { animation-delay: 1s; }
    .loading-text span:nth-child(7) { animation-delay: 1.2s; }
    .loading-text span:nth-child(8) { animation-delay: 1.4s; }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-12px); }
    }
  </style>
</head>
<body class="relative">

  <!-- Moving stars -->
  <div class="stars"></div>

  <!-- Loading screen -->
  <div id="loading" class="flex items-center justify-center h-screen bg-black z-50 absolute top-0 left-0 w-full">
    <h1 class="loading-text">
      <span>M</span><span>o</span><span>r</span><span>e</span>
      <span>H</span><span>o</span><span>s</span><span>t</span>
    </h1>
  </div>

  <!-- Landing -->
  <div id="landing" class="hidden h-screen flex items-center justify-center">
    <div class="bg-gray-900 bg-opacity-70 backdrop-blur-xl p-10 rounded-2xl w-96 text-center shadow-2xl">
      <h2 class="text-3xl font-bold mb-6">Welcome to <span class="text-cyan-400">MoreHost</span></h2>
      <div id="g_id_onload"
        data-client_id="222604044829-bpqusruarmij7944cjpb67sfvaamam16.apps.googleusercontent.com"
        data-callback="handleGoogleLogin"
        data-auto_prompt="false">
      </div>
      <div class="g_id_signin" 
        data-type="standard" 
        data-shape="rectangular" 
        data-theme="outline" 
        data-text="continue_with" 
        data-size="large" 
        data-logo_alignment="left">
      </div>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="hidden p-10">
    <h1 class="text-4xl font-bold mb-6">Dashboard</h1>
    <button onclick="createProject()" class="bg-cyan-500 px-4 py-2 rounded-xl">+ New Project</button>
    <div id="projects" class="mt-6 space-y-4"></div>
  </div>

  <!-- Workspace -->
  <div id="workspace" class="hidden h-screen flex flex-col">
    <div class="flex justify-between items-center p-4 bg-gray-900">
      <h2 id="projectName" class="text-xl font-bold"></h2>
      <button onclick="showPreview()" class="bg-green-500 px-4 py-2 rounded">Preview</button>
    </div>
    <div id="editor" class="flex-1"></div>
    <iframe id="preview" class="hidden w-full h-full"></iframe>
  </div>

  <script>
    // Auto hide loading after 2s
    setTimeout(() => {
      document.getElementById('loading').style.display = 'none';
      initApp();
    }, 2000);

    function initApp() {
      const user = localStorage.getItem("user");
      if (user) {
        document.getElementById('dashboard').classList.remove('hidden');
      } else {
        document.getElementById('landing').classList.remove('hidden');
      }
    }

    function handleGoogleLogin(response) {
      const data = JSON.parse(atob(response.credential.split('.')[1]));
      localStorage.setItem("user", JSON.stringify({
        name: data.name,
        email: data.email,
        picture: data.picture
      }));
      document.getElementById('landing').classList.add('hidden');
      document.getElementById('dashboard').classList.remove('hidden');
    }

    function createProject() {
      const name = prompt("Enter project name:");
      if (!name) return;
      const project = document.createElement("div");
      project.className = "p-4 bg-gray-800 rounded cursor-pointer";
      project.innerText = name;
      project.onclick = () => openWorkspace(name);
      document.getElementById('projects').appendChild(project);
    }

    let editor;
    function openWorkspace(name) {
      document.getElementById('dashboard').classList.add('hidden');
      document.getElementById('workspace').classList.remove('hidden');
      document.getElementById('projectName').innerText = name;

      if (!editor) {
        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs' }});
        require(["vs/editor/editor.main"], function () {
          editor = monaco.editor.create(document.getElementById('editor'), {
            value: "<!DOCTYPE html>\n<html>\n<head>\n<title>Hello</title>\n</head>\n<body>\n<h1>Hello World</h1>\n</body>\n</html>",
            language: "html",
            theme: "vs-dark",
          });
        });
      }
    }

    function showPreview() {
      const code = editor.getValue();
      const iframe = document.getElementById('preview');
      iframe.classList.remove('hidden');
      iframe.srcdoc = code;
    }
  </script>
</body>
</html>
